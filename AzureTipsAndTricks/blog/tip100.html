<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Tip 100 - Creating an Email Subscription with Azure Functions - Sending Emails | Azure Tips and Tricks</title>
    <meta name="generator" content="VuePress 1.6.0">
    <link rel="apple-touch-icon" sizes="57x57" href="/AzureTipsAndTricks/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/AzureTipsAndTricks/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/AzureTipsAndTricks/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/AzureTipsAndTricks/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/AzureTipsAndTricks/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/AzureTipsAndTricks/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/AzureTipsAndTricks/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/AzureTipsAndTricks/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/AzureTipsAndTricks/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192" href="/AzureTipsAndTricks/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/AzureTipsAndTricks/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/AzureTipsAndTricks/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/AzureTipsAndTricks/favicon-16x16.png">
    <link rel="manifest" href="/AzureTipsAndTricks/manifest.json">
    <script async="true" src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
    <meta name="description" content="">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <link rel="preload" href="/AzureTipsAndTricks/assets/css/0.styles.eb7fafdc.css" as="style"><link rel="preload" href="/AzureTipsAndTricks/assets/js/app.8cbf5768.js" as="script"><link rel="preload" href="/AzureTipsAndTricks/assets/js/2.896fd6ce.js" as="script"><link rel="preload" href="/AzureTipsAndTricks/assets/js/12.2c922249.js" as="script"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/10.62e84388.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/100.3d83880f.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/101.e8f5b59f.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/102.fdfd3108.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/103.c421c44d.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/104.42a55d67.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/105.2494d858.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/106.662ee5d2.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/107.9b981e3f.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/108.439da90e.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/109.d17d695c.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/11.2e9215d8.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/110.523d014e.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/111.7f7df1e1.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/112.935517a6.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/113.9715828d.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/114.78df0d18.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/115.e3fd3d33.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/116.03ae2ff7.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/117.451e18ec.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/118.a4711783.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/119.e0150b9b.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/120.218fbea2.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/121.4e446d01.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/122.d729f653.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/123.3fc775bc.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/124.32dee43b.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/125.d7c21097.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/126.9f90d024.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/127.5b8b0710.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/128.3bf48964.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/129.8f751c05.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/13.049e8e7a.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/130.ed2d58bd.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/131.4ce3418d.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/132.936745c0.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/133.b20e5183.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/134.46f3d427.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/135.d5ad94be.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/136.1ef45fa6.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/137.2f9be353.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/138.2b7625ec.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/139.82556e7b.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/14.01bc6a60.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/140.a77adaee.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/141.b6de9577.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/142.406df81f.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/143.7dfaa222.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/144.77e62d81.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/145.f444ad7a.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/146.b0e6b83c.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/147.ecb06a8c.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/148.b8a2f13e.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/149.9c8f03e3.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/15.c13fb98f.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/150.1877cc2b.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/151.695bbea0.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/152.10f03f77.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/153.15dc62c7.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/154.676d2829.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/155.89b804d9.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/156.35af0309.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/157.aedc1595.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/158.df6e0a04.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/159.a5cdd2a3.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/16.1dc04334.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/160.bceb6636.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/161.a17a787e.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/162.97cd48d1.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/163.f1e9b5d0.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/164.78857b0b.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/165.36443b20.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/166.18e5aefb.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/167.2674bf63.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/168.94dc1f7d.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/169.7de6a45b.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/17.3c075d9a.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/170.d30c4335.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/171.e10a5bcb.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/172.34751f8c.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/173.d84170ba.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/174.dc0ef514.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/175.8c2f8bec.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/176.1ce3dd31.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/177.9e5b31ac.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/178.dec1ab2f.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/179.695944e4.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/18.dc1bd2b2.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/180.7ae49d4a.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/181.78094fb1.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/182.b99c59ec.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/183.c8f8ca31.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/184.92494374.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/185.0d8f52ba.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/186.5a9b02c2.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/187.b497aaa6.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/188.a6d284de.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/189.82d0a55e.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/19.ef3dceda.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/190.1d9d02c7.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/191.41dbc980.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/192.7fb6ef89.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/193.4ab0f48d.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/194.d91ad946.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/195.390a0a4a.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/196.3f5de651.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/197.183fd80f.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/198.2d8a5f85.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/199.21f6aafc.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/20.1ce5dcdd.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/200.f1519a4d.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/201.d1d96f87.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/202.c939d23d.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/203.daf63d98.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/204.11e77b04.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/205.c6332bb1.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/206.bf54bd64.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/207.59f68bb5.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/208.b713c1a6.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/209.3c725ace.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/21.93b71334.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/210.37f25b2d.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/211.595c0a03.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/212.2351b467.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/213.700111d8.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/214.cf552dd0.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/215.b858cfdb.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/216.c026618a.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/217.dcd491ef.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/218.2b9d3604.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/219.6266e2ad.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/22.6aaa1e9e.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/220.90921255.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/221.8646ac02.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/222.30bb32e9.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/223.572162f4.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/224.2376f97d.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/225.4ccd86f9.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/226.b0547d17.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/227.5c8c3661.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/228.40d4652e.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/229.b727db15.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/23.9e814a6d.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/230.cd5579b8.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/231.5b5ae18d.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/232.60ed1260.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/233.c0612228.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/234.bf4aea57.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/235.cde16996.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/236.95f09bfd.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/237.dd5d507d.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/238.06e476a9.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/239.96d856f8.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/24.c5c6fa0b.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/240.c09cacaa.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/241.4b1f7d0e.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/242.b3480dc5.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/243.3b21520d.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/244.90f1d9bf.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/245.fd336eed.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/246.1d3aee05.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/247.b78c15cc.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/248.6ab3f021.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/249.385b5bbb.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/25.01cbe528.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/250.bb95f4b5.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/251.84ec8d3a.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/252.dc058b3e.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/253.327987c9.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/254.9badd883.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/255.60197825.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/256.f9f58068.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/257.87c02564.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/258.d1cc4004.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/259.7de59bdd.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/26.d1a853fc.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/260.56d6963f.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/261.8493a4c8.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/262.8f9d93cb.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/263.1d891e7f.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/264.76f2ec8f.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/265.128ddee0.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/266.1417a40a.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/267.f1a7edd8.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/268.33f4281c.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/269.2f282889.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/27.f7831fd7.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/270.6fdd115b.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/271.feb86506.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/272.9cba9a09.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/273.c6f2f9fb.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/274.f6b6fe56.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/275.e7b04fc8.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/276.46388565.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/277.63784e8e.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/278.4133d226.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/279.41dcd080.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/28.6e3fd344.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/280.e12e3628.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/281.b55eb893.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/282.4569076b.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/29.6ff5cbf9.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/3.e8ae24a7.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/30.c8ee04f1.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/31.33f0f3af.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/32.c36b7443.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/33.705de52f.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/34.1dd98b0a.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/35.9177d4c7.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/36.0665bf04.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/37.16faffb6.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/38.a4dff0c9.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/39.3b955951.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/4.fe425f07.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/40.ccf76bd3.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/41.ac1fd8e9.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/42.d68d51ef.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/43.22a92626.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/44.01298a19.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/45.cc8d2f9f.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/46.31e27b9e.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/47.b86a0467.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/48.031d1248.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/49.0e7528fc.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/5.c86b45ec.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/50.2df29dc9.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/51.53038243.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/52.ebad4123.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/53.f82b323e.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/54.538f97c1.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/55.73874b9c.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/56.feb42725.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/57.5775214f.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/58.804b8d5a.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/59.6424dc7b.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/6.f3117617.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/60.fbf89a40.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/61.52cf7900.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/62.b2623e53.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/63.03fe04c0.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/64.3ca5afe7.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/65.245c91ce.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/66.9912ad7d.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/67.b9f59908.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/68.7d108138.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/69.0206146c.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/7.1608e968.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/70.e394432a.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/71.fb4ea6ed.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/72.a8b7435d.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/73.e669c03e.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/74.9255a8fe.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/75.81b32edc.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/76.32d5f17c.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/77.2a555aba.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/78.426e5768.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/79.8ef11eb7.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/8.83534578.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/80.5777f93f.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/81.44d4f5eb.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/82.2e30fac3.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/83.0c3be046.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/84.56ab966d.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/85.419f1161.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/86.131f006d.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/87.f562eac6.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/88.788ce064.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/89.11d3924e.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/9.b6cba723.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/90.7f266269.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/91.776dd669.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/92.8865b1cb.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/93.5edbece0.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/94.0bb153bd.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/95.5ccf5720.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/96.7703ebc7.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/97.dad016e8.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/98.47e3c815.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/99.12325939.js">
    <link rel="stylesheet" href="/AzureTipsAndTricks/assets/css/0.styles.eb7fafdc.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/AzureTipsAndTricks/" class="home-link router-link-active"><img src="/AzureTipsAndTricks/files/vintage.png" alt="Azure Tips and Tricks" class="logo"> <span class="site-name can-hide">Azure Tips and Tricks</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/AzureTipsAndTricks/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="http://videos.azuredev.tips" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Videos
  <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/Microsoft/AzureTipsAndTricks/issues/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Questions?
  <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://microsoft.github.io/AzureTipsAndTricks/rss.xml" target="_blank" rel="noopener noreferrer" class="nav-link external">
  RSS Feed
  <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/microsoft/azuretipsandtricks" target="_blank" rel="noopener noreferrer" class="repo-link">
    Star this Repo
    <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/AzureTipsAndTricks/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="http://videos.azuredev.tips" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Videos
  <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/Microsoft/AzureTipsAndTricks/issues/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Questions?
  <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://microsoft.github.io/AzureTipsAndTricks/rss.xml" target="_blank" rel="noopener noreferrer" class="nav-link external">
  RSS Feed
  <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/microsoft/azuretipsandtricks" target="_blank" rel="noopener noreferrer" class="repo-link">
    Star this Repo
    <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Home</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/AzureTipsAndTricks/" aria-current="page" class="sidebar-link">Welcome</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/AzureTipsAndTricks/#git-workflow" class="sidebar-link">Git Workflow</a></li><li class="sidebar-sub-header"><a href="/AzureTipsAndTricks/#contributing" class="sidebar-link">Contributing</a></li></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Tips</span> <!----></p> <!----></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Recently Added</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/AzureTipsAndTricks/blog/tip279.html" class="sidebar-link">Tip 279 - Serverless operations with Azure DevOps</a></li><li><a href="/AzureTipsAndTricks/blog/tip278.html" class="sidebar-link">Tip 278 - Azure Functions on Kubernetes with KEDA Part 2 of 2</a></li><li><a href="/AzureTipsAndTricks/blog/tip277.html" class="sidebar-link">Tip 277 - Azure Functions on Kubernetes with KEDA Part 1 of 2</a></li><li><a href="/AzureTipsAndTricks/blog/tip276.html" class="sidebar-link">Tip 276 - Top 10 Azure resources that you can use today</a></li><li><a href="/AzureTipsAndTricks/blog/tip275.html" class="sidebar-link">Tip 275 - Using Azure KeyVault secrets in Azure PowerShell and Azure CLI</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>.NET</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Active Directory</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Activity Log</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Advisor</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>App Configuration</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>App Service</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>APIM</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>ASP.NET</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Authentication</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Automation</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Availability Zones</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>AzCopy</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Blueprints</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>CDN</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>CLI</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Cloud Shell</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Cognitive Services</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Containers</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Cosmos DB</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Data Share</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Data Studio</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>DevOps</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Dev Spaces</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Front Door</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Functions</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/AzureTipsAndTricks/blog/tip277.html" class="sidebar-link">Tip 277 - Azure Functions on Kubernetes with KEDA Part 1 of 2</a></li><li><a href="/AzureTipsAndTricks/blog/tip260.html" class="sidebar-link">Tip 260 - Using Azure Functions Premium Plan to avoid cold-start</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/AzureTipsAndTricks/blog/tip247.html" class="sidebar-link">Tip 247 - Creating custom bindings for Azure Functions</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/AzureTipsAndTricks/blog/tip247.html#azure-functions-bindings" class="sidebar-link">Azure Functions Bindings</a></li><li class="sidebar-sub-header"><a href="/AzureTipsAndTricks/blog/tip247.html#prerequisites" class="sidebar-link">Prerequisites</a></li><li class="sidebar-sub-header"><a href="/AzureTipsAndTricks/blog/tip247.html#creating-a-custom-binding-for-azure-functions" class="sidebar-link">Creating a custom binding for Azure Functions</a></li><li class="sidebar-sub-header"><a href="/AzureTipsAndTricks/blog/tip247.html#conclusion" class="sidebar-link">Conclusion</a></li></ul></li><li><a href="/AzureTipsAndTricks/blog/tip211.html" class="sidebar-link">Tip 211 - Working with Azure Functions using PowerShell (Preview)</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/AzureTipsAndTricks/blog/tip196.html" class="sidebar-link">Tip 196 - Testing Azure Functions</a></li><li><a href="/AzureTipsAndTricks/blog/tip35.html" class="sidebar-link">Tip 35 - Work with the Azure Functions File System using the Console</a></li><li><a href="/AzureTipsAndTricks/blog/tip36.html" class="sidebar-link">Tip 36 - Quickly Renew or Revoke Azure Functions Keys</a></li><li><a href="/AzureTipsAndTricks/blog/tip50.html" class="sidebar-link">Tip 50 - Create an Azure Functions project with Visual Studio Code</a></li><li><a href="/AzureTipsAndTricks/blog/tip51.html" class="sidebar-link">Tip 51 - Debug Azure Functions with Visual Studio Code</a></li><li><a href="/AzureTipsAndTricks/blog/tip52.html" class="sidebar-link">Tip 52 - Deploy Azure Functions with Visual Studio Code</a></li><li><a href="/AzureTipsAndTricks/blog/tip61.html" class="sidebar-link">Tip 61 - Java in Azure Function with VS Code</a></li><li><a href="/AzureTipsAndTricks/blog/tip62.html" class="sidebar-link">Tip 62 - Force HTTPS in Azure Functions</a></li><li><a href="/AzureTipsAndTricks/blog/tip63.html" class="sidebar-link">Tip 63 - Open an existing Azure Function in Visual Studio</a></li><li><a href="/AzureTipsAndTricks/blog/tip64.html" class="sidebar-link">Tip 64 - Using a different route prefix with Azure Functions</a></li><li><a href="/AzureTipsAndTricks/blog/tip94.html" class="sidebar-link">Tip 94 - Customize an Azure Functions Endpoint in Seconds</a></li><li><a href="/AzureTipsAndTricks/blog/tip97.html" class="sidebar-link">Tip 97 - Generate a Weekly Digest Email for a Blog using Azure Functions, SendGrid and Azure Storage</a></li><li><a href="/AzureTipsAndTricks/blog/tip98.html" class="sidebar-link">Tip 98 - Creating an Email Subscription with Azure Functions - Storing Emails</a></li><li><a href="/AzureTipsAndTricks/blog/tip99.html" class="sidebar-link">Tip 99 - Creating an Email Subscription with Azure Functions - Writing the Frontend</a></li><li><a href="/AzureTipsAndTricks/blog/tip100.html" aria-current="page" class="active sidebar-link">Tip 100 - Creating an Email Subscription with Azure Functions - Sending Emails</a></li><li><a href="/AzureTipsAndTricks/blog/tip130.html" class="sidebar-link">Tip 130 - Manage Application Settings for Azure Functions within Visual Studio</a></li><li><a href="/AzureTipsAndTricks/blog/tip133.html" class="sidebar-link">Tip 133 - Use the Azure Portal for Durable Functions Development</a></li><li><a href="/AzureTipsAndTricks/blog/tip134.html" class="sidebar-link">Tip 134 - Use Run-From-Zip to deploy a site to Azure Web Apps or Functions</a></li><li><a href="/AzureTipsAndTricks/blog/tip135.html" class="sidebar-link">Tip 135 - Use Run-From-Zip without Azure Storage to deploy a site to Azure Web Apps or Functions</a></li><li><a href="/AzureTipsAndTricks/blog/tip136.html" class="sidebar-link">Tip 136 - Quickly Restore your Local Settings File for Azure Functions</a></li><li><a href="/AzureTipsAndTricks/blog/tip147.html" class="sidebar-link">Tip 147 - Run TSQL on an Azure SQL database with Azure Functions</a></li><li><a href="/AzureTipsAndTricks/blog/tip148.html" class="sidebar-link">Tip 148 - Share Business Logic between Azure Functions</a></li><li><a href="/AzureTipsAndTricks/blog/tip157.html" class="sidebar-link">Tip 157 - Part 1 Create Thumbnail Images with Azure Functions and Azure Storage</a></li><li><a href="/AzureTipsAndTricks/blog/tip158.html" class="sidebar-link">Tip 158 - Part 2 Create Thumbnail Images with Azure Functions and Azure Storage</a></li><li><a href="/AzureTipsAndTricks/blog/tip161.html" class="sidebar-link">Tip 161 - Change the Azure Function runtime version after Deployment</a></li><li><a href="/AzureTipsAndTricks/blog/tip125.html" class="sidebar-link">Tip 125 - Using Azure Function to call our Logic App with the IoT Button</a></li><li><a href="/AzureTipsAndTricks/blog/tip174.html" class="sidebar-link">Tip 174 - Machine Learning with ML.NET and Azure Functions - Part 1 of 2</a></li><li><a href="/AzureTipsAndTricks/blog/tip175.html" class="sidebar-link">Tip 175 - Machine Learning with ML.NET and Azure Functions - Part 2 of 2</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>GitHub</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>HD Insight</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Information Protection</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>iOS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>IoT</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Java</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JavaScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Key Vault</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Kubernetes</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Lab Services</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Logic Apps</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Machine Learning</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Media Services</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Migrate</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Monitor</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Node.js</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Pipeline</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Portal</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>PowerShell</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Productivity</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Resource Manager</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>SAP</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>SDKs</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Search</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>SendGrid</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>SignalR</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>SQL</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Storage</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Virtual Machines</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Visual Studio Family</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>VNET</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>💡 Learn more : <a href="https://docs.microsoft.com/azure/azure-functions/?WT.mc_id=docs-azuredevtips-micrum" target="_blank" rel="noopener noreferrer">Azure Functions Documentation<svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p></div> <h4 id="where-are-we"><a href="#where-are-we" class="header-anchor">#</a> Where are we?</h4> <p><strong>Full Source Code</strong> The source code for the app can be found on <a href="https://github.com/mbcrump/EmailSubscription?WT.mc_id=github-azuredevtips-micrum" target="_blank" rel="noopener noreferrer">GitHub<svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>This blog post is part of a series on how to generate a weekly digest email for a blog using Azure Functions, SendGrid and Azure Storage.</p> <ul><li><a href="https://microsoft.github.io/AzureTipsAndTricks/blog/tip97.html" target="_blank" rel="noopener noreferrer">Part 1 - What we're going to build and how to build it<svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://microsoft.github.io/AzureTipsAndTricks/blog/tip98.html" target="_blank" rel="noopener noreferrer">Part 2 - Storing Emails using Azure Table Storage<svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://microsoft.github.io/AzureTipsAndTricks/blog/tip99.html" target="_blank" rel="noopener noreferrer">Part 3 - Writing the Frontend with HTML5 and jQuery<svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://microsoft.github.io/AzureTipsAndTricks/blog/tip100.html" target="_blank" rel="noopener noreferrer">Part 4 - Sending Emails with Sendgrid and Azure Functions<svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <p>We're trying to build a Email Subscription similar to the following. If you want to catch up, then read the previous posts.</p> <img src="/AzureTipsAndTricks/files/emailsub1.png"> <h4 id="generating-and-sending-emails"><a href="#generating-and-sending-emails" class="header-anchor">#</a> Generating and Sending Emails</h4> <p>In our last post, we left off by creating a frontend that used HTML5, jQuery and some light CSS work. When the user filled out the form and clicked <strong>Submit</strong>, then it would check to ensure the email is valid and then use an AJAX call to POST the data to our Azure Function that we wrote in part 2. Today, we'll wrap things up by using SendGrid, C# and Azure Functions to send emails every Sunday at 9:30AM.</p> <h4 id="use-the-azure-functions-template-inside-of-visual-studio"><a href="#use-the-azure-functions-template-inside-of-visual-studio" class="header-anchor">#</a> Use the Azure Functions Template inside of Visual Studio</h4> <p>Return to the project we created earlier and right-click the project and select <strong>Add Item</strong> and select <strong>Azure Functions</strong>. Now give it a name such as <strong>SendEmail</strong> and select <strong>Timer Trigger</strong> and provide the following schedule <strong>0 30 9 * * SUN</strong>.</p> <img src="/AzureTipsAndTricks/files/emailsub5.png"> <p>We'll begin by declaring the feedurl and looping through the feed to collect the last 7 days worth of blog posts and append them to a string. Here we are using SyndicationClient to make easier work of everything. We could also use StringBuilder but for now this will do.</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">string</span></span> feedurl <span class="token operator">=</span> <span class="token string">&quot;https://www.michaelcrump.net/feed.xml&quot;</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">string</span></span> last7days <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>

<span class="token class-name">XmlReader</span> reader <span class="token operator">=</span> XmlReader<span class="token punctuation">.</span><span class="token function">Create</span><span class="token punctuation">(</span>feedurl<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">SyndicationFeed</span> feed <span class="token operator">=</span> SyndicationFeed<span class="token punctuation">.</span><span class="token function">Load</span><span class="token punctuation">(</span>reader<span class="token punctuation">)</span><span class="token punctuation">;</span>
reader<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

last7days <span class="token operator">=</span> last7days <span class="token operator">+</span> <span class="token string">&quot;&lt;b&gt;New updates in the last 7 days:&lt;/b&gt;&lt;br&gt;&lt;br&gt;&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name">SyndicationItem</span> item <span class="token keyword">in</span> feed<span class="token punctuation">.</span>Items<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>DateTime<span class="token punctuation">.</span>Now <span class="token operator">-</span> item<span class="token punctuation">.</span>PublishDate<span class="token punctuation">)</span><span class="token punctuation">.</span>TotalDays <span class="token operator">&lt;</span> <span class="token number">7</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        last7days <span class="token operator">=</span> last7days <span class="token operator">+</span> <span class="token string">&quot;&lt;a href=\&quot;&quot;</span> <span class="token operator">+</span> item<span class="token punctuation">.</span>Links<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>Uri <span class="token operator">+</span> <span class="token string">&quot;\')&quot;</span><span class="token operator">&gt;</span><span class="token string">&quot; + item.Title.Text + &quot;</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span><span class="token operator">&lt;</span>br<span class="token operator">&gt;</span>&quot;<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>       
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>We'll now grab a list of our <strong>EmailSubscribers</strong> that is in our Azure Storage Table.</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token class-name">CloudStorageAccount</span> storageAccount <span class="token operator">=</span> CloudStorageAccount<span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span>ConfigurationManager<span class="token punctuation">.</span>AppSettings<span class="token punctuation">[</span><span class="token string">&quot;TableStorageConnString&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">CloudTableClient</span> tableClient <span class="token operator">=</span> storageAccount<span class="token punctuation">.</span><span class="token function">CreateCloudTableClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">CloudTable</span> table <span class="token operator">=</span> tableClient<span class="token punctuation">.</span><span class="token function">GetTableReference</span><span class="token punctuation">(</span><span class="token string">&quot;MCBlogSubscribers&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
table<span class="token punctuation">.</span><span class="token function">CreateIfNotExists</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>We'll need to add this helper method outside of the <strong>Run</strong> method we are currently in. It will search for the <strong>Partition Key</strong> that matches what we sent in our POST request in post #2.</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name">List<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> <span class="token function">GetAllEmailAddresses</span><span class="token punctuation">(</span><span class="token class-name">CloudTable</span> table<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name"><span class="token keyword">var</span></span> retList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">TableQuery<span class="token punctuation">&lt;</span>EmailEntity<span class="token punctuation">&gt;</span></span> query <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">TableQuery<span class="token punctuation">&lt;</span>EmailEntity<span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">Where</span><span class="token punctuation">(</span>TableQuery<span class="token punctuation">.</span><span class="token function">GenerateFilterCondition</span><span class="token punctuation">(</span><span class="token string">&quot;PartitionKey&quot;</span><span class="token punctuation">,</span> QueryComparisons<span class="token punctuation">.</span>Equal<span class="token punctuation">,</span> <span class="token string">&quot;SendEmailToReaders&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name">EmailEntity</span> emailname <span class="token keyword">in</span> table<span class="token punctuation">.</span><span class="token function">ExecuteQuery</span><span class="token punctuation">(</span>query<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        retList<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>emailname<span class="token punctuation">.</span>EmailAddress<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> retList<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>Now we need to send our emails. This is where it gets slightly tricky as we need to use the <strong>X-SMTPAPI</strong> header to hide the email address of all our users. Search <strong>NuGet</strong> and add <strong>Sendgrid.SmtpApi</strong> to your references. We'll need to get our SendGrid Username and Password and pass them in the credentials.</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> header <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Header</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">SmtpClient</span> client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">SmtpClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
client<span class="token punctuation">.</span>Port <span class="token operator">=</span> <span class="token number">587</span><span class="token punctuation">;</span>
client<span class="token punctuation">.</span>Host <span class="token operator">=</span> <span class="token string">&quot;smtp.sendgrid.net&quot;</span><span class="token punctuation">;</span>
client<span class="token punctuation">.</span>Timeout <span class="token operator">=</span> <span class="token number">10000</span><span class="token punctuation">;</span>
client<span class="token punctuation">.</span>DeliveryMethod <span class="token operator">=</span> SmtpDeliveryMethod<span class="token punctuation">.</span>Network<span class="token punctuation">;</span>
client<span class="token punctuation">.</span>UseDefaultCredentials <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
client<span class="token punctuation">.</span>Credentials <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">System<span class="token punctuation">.</span>Net<span class="token punctuation">.</span>NetworkCredential</span><span class="token punctuation">(</span>ConfigurationManager<span class="token punctuation">.</span>AppSettings<span class="token punctuation">[</span><span class="token string">&quot;SendGridUserName&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> ConfigurationManager<span class="token punctuation">.</span>AppSettings<span class="token punctuation">[</span><span class="token string">&quot;SendGridSecret&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>Now we need to form our email message. We'll pull the list of email addresses from our Azure Storage Table and force the HTML view to ensure our links are clickable and tell those that don't have HTML enabled, to enable it. 😃</p> <p>Finally, we'll send the email asynchronously and dispose of our client.</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token class-name">MailMessage</span> mail <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">MailMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">List<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> recipientlist <span class="token operator">=</span> <span class="token function">GetAllEmailAddresses</span><span class="token punctuation">(</span>table<span class="token punctuation">)</span><span class="token punctuation">;</span>
header<span class="token punctuation">.</span><span class="token function">SetTo</span><span class="token punctuation">(</span>recipientlist<span class="token punctuation">)</span><span class="token punctuation">;</span>
mail<span class="token punctuation">.</span>From <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">MailAddress</span><span class="token punctuation">(</span><span class="token string">&quot;michael@michaelcrump.net&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Azure Tips and Tricks&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
mail<span class="token punctuation">.</span>To<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">&quot;no-reply@michaelcrump.net&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
mail<span class="token punctuation">.</span>Subject <span class="token operator">=</span> <span class="token string">&quot;Weekly Digest for MichaelCrump.net Blog&quot;</span><span class="token punctuation">;</span>
mail<span class="token punctuation">.</span>BodyEncoding <span class="token operator">=</span> Encoding<span class="token punctuation">.</span>UTF8<span class="token punctuation">;</span>
mail<span class="token punctuation">.</span>SubjectEncoding <span class="token operator">=</span> Encoding<span class="token punctuation">.</span>UTF8<span class="token punctuation">;</span>

<span class="token class-name">AlternateView</span> htmlView <span class="token operator">=</span> AlternateView<span class="token punctuation">.</span><span class="token function">CreateAlternateViewFromString</span><span class="token punctuation">(</span>last7days<span class="token punctuation">)</span><span class="token punctuation">;</span>
htmlView<span class="token punctuation">.</span>ContentType <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">System<span class="token punctuation">.</span>Net<span class="token punctuation">.</span>Mime<span class="token punctuation">.</span>ContentType</span><span class="token punctuation">(</span><span class="token string">&quot;text/html&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
mail<span class="token punctuation">.</span>AlternateViews<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>htmlView<span class="token punctuation">)</span><span class="token punctuation">;</span>
mail<span class="token punctuation">.</span>Body <span class="token operator">=</span> <span class="token string">&quot;Please enable HTML in order to view the message&quot;</span><span class="token punctuation">;</span>

mail<span class="token punctuation">.</span>Headers<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">&quot;X-SMTPAPI&quot;</span><span class="token punctuation">,</span> header<span class="token punctuation">.</span><span class="token function">JsonString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">SendMailAsync</span><span class="token punctuation">(</span>mail<span class="token punctuation">)</span><span class="token punctuation">;</span>

mail<span class="token punctuation">.</span><span class="token function">Dispose</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>Before we publish the updates to our Azure Function, we'll need to ensure that users can unsubscribe easily. I was originally going to handle this myself, but it is super simple with SendGrid.</p> <p>Log into your <a href="https://app.sendgrid.com/" target="_blank" rel="noopener noreferrer">SendGrid<svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> account and go to <strong>Settings</strong> and then <strong>Tracking</strong> and you'll see <strong>Subscription Tracking</strong>. If you turn this on, then it will add the unsubscribe link for you and manage those users. NEAT!</p> <img src="/AzureTipsAndTricks/files/emailsubtracking.png"> <p>Now is a great time to go ahead and publish our Azure Function. Simply right click the project name and select Publish, then Publish again as shown below.</p> <img src="/AzureTipsAndTricks/files/emailsub8.png"> <p>Once it deploys, if you click on the <strong>SendEmail</strong> function, then you can run it (note you can also run it inside of Visual Studio).</p> <p>It should say that it compeleted successfully, and now go check your email and it should be working.</p> <img src="/AzureTipsAndTricks/files/emailcompletedsuccessfully.png"> <p>And we're done! If something isn't working then check the source code for the app on <a href="https://github.com/mbcrump/EmailSubscription?WT.mc_id=github-azuredevtips-micrum" target="_blank" rel="noopener noreferrer">GitHub<svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> and if you have any questions then ping me on <a href="http://twitter.com/mbcrump?WT.mc_id=twitter-azuredevtips-micrum" target="_blank" rel="noopener noreferrer">twitter<svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. You should follow me btw, I might have another tip and trick to share!</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/microsoft/azuretipsandtricks/edit/master/blog/tip100.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/AzureTipsAndTricks/blog/tip99.html" class="prev">
        Tip 99 - Creating an Email Subscription with Azure Functions - Writing the Frontend
      </a></span> <span class="next"><a href="/AzureTipsAndTricks/blog/tip130.html">
        Tip 130 - Manage Application Settings for Azure Functions within Visual Studio
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/AzureTipsAndTricks/assets/js/app.8cbf5768.js" defer></script><script src="/AzureTipsAndTricks/assets/js/2.896fd6ce.js" defer></script><script src="/AzureTipsAndTricks/assets/js/12.2c922249.js" defer></script>
  </body>
</html>
