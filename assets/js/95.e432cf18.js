(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[95],{

/***/ "./blog/tip182.md":
/*!************************!*\
  !*** ./blog/tip182.md ***!
  \************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _tip182_md_vue_type_template_id_6acc8ec2___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./tip182.md?vue&type=template&id=6acc8ec2& */ "./blog/tip182.md?vue&type=template&id=6acc8ec2&");
/* harmony import */ var _node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../node_modules/vue-loader/lib/runtime/componentNormalizer.js */ "./node_modules/vue-loader/lib/runtime/componentNormalizer.js");

var script = {}


/* normalize component */

var component = Object(_node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_1__["default"])(
  script,
  _tip182_md_vue_type_template_id_6acc8ec2___WEBPACK_IMPORTED_MODULE_0__["render"],
  _tip182_md_vue_type_template_id_6acc8ec2___WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"],
  false,
  null,
  null,
  null
  
)

/* harmony default export */ __webpack_exports__["default"] = (component.exports);

/***/ }),

/***/ "./blog/tip182.md?vue&type=template&id=6acc8ec2&":
/*!*******************************************************!*\
  !*** ./blog/tip182.md?vue&type=template&id=6acc8ec2& ***!
  \*******************************************************/
/*! exports provided: render, staticRenderFns */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _node_modules_cache_loader_dist_cjs_js_cacheDirectory_node_modules_vuepress_core_node_modules_cache_vuepress_cacheIdentifier_671ceca3_vue_loader_template_node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_cache_loader_dist_cjs_js_ref_1_0_node_modules_vue_loader_lib_index_js_ref_1_1_node_modules_vuepress_markdown_loader_index_js_ref_1_2_tip182_md_vue_type_template_id_6acc8ec2___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/@vuepress/core/node_modules/.cache/vuepress","cacheIdentifier":"671ceca3-vue-loader-template"}!../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib??ref--1-1!../node_modules/@vuepress/markdown-loader??ref--1-2!./tip182.md?vue&type=template&id=6acc8ec2& */ "./node_modules/cache-loader/dist/cjs.js?{\"cacheDirectory\":\"node_modules/@vuepress/core/node_modules/.cache/vuepress\",\"cacheIdentifier\":\"671ceca3-vue-loader-template\"}!./node_modules/vue-loader/lib/loaders/templateLoader.js?!./node_modules/cache-loader/dist/cjs.js?!./node_modules/vue-loader/lib/index.js?!./node_modules/@vuepress/markdown-loader/index.js?!./blog/tip182.md?vue&type=template&id=6acc8ec2&");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "render", function() { return _node_modules_cache_loader_dist_cjs_js_cacheDirectory_node_modules_vuepress_core_node_modules_cache_vuepress_cacheIdentifier_671ceca3_vue_loader_template_node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_cache_loader_dist_cjs_js_ref_1_0_node_modules_vue_loader_lib_index_js_ref_1_1_node_modules_vuepress_markdown_loader_index_js_ref_1_2_tip182_md_vue_type_template_id_6acc8ec2___WEBPACK_IMPORTED_MODULE_0__["render"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return _node_modules_cache_loader_dist_cjs_js_cacheDirectory_node_modules_vuepress_core_node_modules_cache_vuepress_cacheIdentifier_671ceca3_vue_loader_template_node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_cache_loader_dist_cjs_js_ref_1_0_node_modules_vue_loader_lib_index_js_ref_1_1_node_modules_vuepress_markdown_loader_index_js_ref_1_2_tip182_md_vue_type_template_id_6acc8ec2___WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"]; });



/***/ }),

/***/ "./node_modules/cache-loader/dist/cjs.js?{\"cacheDirectory\":\"node_modules/@vuepress/core/node_modules/.cache/vuepress\",\"cacheIdentifier\":\"671ceca3-vue-loader-template\"}!./node_modules/vue-loader/lib/loaders/templateLoader.js?!./node_modules/cache-loader/dist/cjs.js?!./node_modules/vue-loader/lib/index.js?!./node_modules/@vuepress/markdown-loader/index.js?!./blog/tip182.md?vue&type=template&id=6acc8ec2&":
/*!*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/@vuepress/core/node_modules/.cache/vuepress","cacheIdentifier":"671ceca3-vue-loader-template"}!./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ref--1-0!./node_modules/vue-loader/lib??ref--1-1!./node_modules/@vuepress/markdown-loader??ref--1-2!./blog/tip182.md?vue&type=template&id=6acc8ec2& ***!
  \*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "render", function() { return render; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return staticRenderFns; });
var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ContentSlotsDistributor',{attrs:{"slot-key":_vm.$parent.slotKey}},[_c('div',{staticClass:"custom-block tip"},[_c('p',{staticClass:"custom-block-title"},[_vm._v("TIP")]),_vm._v(" "),_c('p',[_vm._v("ðŸ’¡ Learn more : "),_c('a',{attrs:{"href":"https://docs.microsoft.com/azure/virtual-network/virtual-networks-overview?WT.mc_id=azure-azuredevtips-azureappsdev","target":"_blank","rel":"noopener noreferrer"}},[_vm._v("Azure Virtual Network"),_c('OutboundLink')],1),_vm._v(".")])]),_vm._v(" "),_c('h3',{attrs:{"id":"use-vnet-peering-to-connect-existing-vnets"}},[_c('a',{staticClass:"header-anchor",attrs:{"href":"#use-vnet-peering-to-connect-existing-vnets"}},[_vm._v("#")]),_vm._v(" Use VNET peering to connect existing VNETs")]),_vm._v(" "),_c('p',[_vm._v("Recently a question came up about how to securely connect existing VNETs. This got me thinking about how I have VMs deployed in their own VNETs.")]),_vm._v(" "),_c('p',[_vm._v("Often when I set up a VM for a demo, Iâ€™ll use the default settings, which creates a VNET for each VM. In this post, Iâ€™ll walk you through how to set up a "),_c('a',{attrs:{"href":"https://docs.microsoft.com/azure/architecture/reference-architectures/hybrid-networking/hub-spoke?toc=%2fazure%2fvirtual-network%2ftoc.json?WT.mc_id=docs-azuredevtips-azureappsdev","target":"_blank","rel":"noopener noreferrer"}},[_vm._v("hub-spoke network topology"),_c('OutboundLink')],1),_vm._v(" to connect existing VNETs.")]),_vm._v(" "),_c('h4',{attrs:{"id":"my-requirements"}},[_c('a',{staticClass:"header-anchor",attrs:{"href":"#my-requirements"}},[_vm._v("#")]),_vm._v(" My requirements")]),_vm._v(" "),_c('ul',[_c('li',[_vm._v("Connect three VNETs, one of which has a Point-to-Site gateway configured")]),_vm._v(" "),_c('li',[_vm._v("No public IPs attached to VM network interfaces")]),_vm._v(" "),_c('li',[_vm._v("Ability to connect to all VMs")])]),_vm._v(" "),_c('h4',{attrs:{"id":"how-i-connect-three-existing-vnets"}},[_c('a',{staticClass:"header-anchor",attrs:{"href":"#how-i-connect-three-existing-vnets"}},[_vm._v("#")]),_vm._v(" How I connect three existing VNETs")]),_vm._v(" "),_c('p',[_vm._v("I am starting with these resources:")]),_vm._v(" "),_c('p',[_vm._v("Subscription 1:")]),_vm._v(" "),_c('ul',[_c('li',[_vm._v("hub-vnet â€“ the VNET with the Point-to-Site VPN configured\n"),_c('ul',[_c('li',[_vm._v("vnet-gw â€“ the VNET gateway")]),_vm._v(" "),_c('li',[_vm._v("win2016svr-east â€“ VM inside the VNET with no public IP ("),_c('a',{attrs:{"href":"https://azuremarketplace.microsoft.com/marketplace/apps/Microsoft.WindowsServer?tab=Overview","target":"_blank","rel":"noopener noreferrer"}},[_vm._v("Windows Server 2016 DataCenter"),_c('OutboundLink')],1),_vm._v(")")])])]),_vm._v(" "),_c('li',[_vm._v("spoke2-vnet â€“ second VNET with no gateway\no\twin10vm2-east â€“ VM inside the VNET with no public IP ("),_c('a',{attrs:{"href":"https://azuremarketplace.microsoft.com/marketplace/apps/microsoftwindowsdesktop.windows-10?tab=Overview","target":"_blank","rel":"noopener noreferrer"}},[_vm._v("Windows 10 image"),_c('OutboundLink')],1),_vm._v(")\nSubscription 2:")]),_vm._v(" "),_c('li',[_vm._v("spoke1-vnet â€“ VNET in another subscription (but same Azure Active Directory)\no\twin10vm-east â€“ VM inside the VNET with no public IP ("),_c('a',{attrs:{"href":"https://azuremarketplace.microsoft.com/marketplace/apps/microsoftwindowsdesktop.windows-10?tab=Overview","target":"_blank","rel":"noopener noreferrer"}},[_vm._v("Windows 10 image"),_c('OutboundLink')],1),_vm._v(")")])]),_vm._v(" "),_c('img',{attrs:{"src":_vm.$withBase('/files/peering1.png')}}),_vm._v(" "),_c('p',[_c('strong',[_vm._v("Part 1:")])]),_vm._v(" "),_c('ul',[_c('li',[_vm._v("In the Azure portal, I go to the "),_c('strong',[_vm._v("hub-vnet virtual network")]),_vm._v(", select "),_c('strong',[_vm._v("Peerings")]),_vm._v(", and click the "),_c('strong',[_vm._v("Add")]),_vm._v(" button.")])]),_vm._v(" "),_c('img',{attrs:{"src":_vm.$withBase('/files/peering2.png')}}),_vm._v(" "),_c('ul',[_c('li',[_vm._v("I give the peering the name "),_c('strong',[_vm._v("hub-spoke2-peer")]),_vm._v(" and "),_c('strong',[_vm._v("select the subscription")]),_vm._v(" and "),_c('strong',[_vm._v("virtual network")]),_vm._v(". Then I check the â€¢\tI give the peering the name hub-spoke2-peer and select the subscription and virtual network. Then I check the Allow gateway transit and click the OK button. and click the "),_c('strong',[_vm._v("OK")]),_vm._v(" button.")])]),_vm._v(" "),_c('img',{attrs:{"src":_vm.$withBase('/files/peering3.png')}}),_vm._v(" "),_c('p',[_vm._v("Note: "),_c('strong',[_vm._v("Allow gateway transit")]),_vm._v(" is needed to make the Point-to-Site connection. Otherwise I would need to use a jumpbox.")]),_vm._v(" "),_c('p',[_vm._v("Once this side of the peering is ready, it will show the status as "),_c('strong',[_vm._v("Initiated")]),_vm._v(".")]),_vm._v(" "),_c('img',{attrs:{"src":_vm.$withBase('/files/peering4.png')}}),_vm._v(" "),_c('ul',[_c('li',[_vm._v("I repeat the above steps and add the peering for the "),_c('strong',[_vm._v("hub-spoke1-peer")]),_vm._v(".")])]),_vm._v(" "),_c('p',[_vm._v("That sets up the hub side of the peering. The next step is the spoke side.")]),_vm._v(" "),_c('p',[_c('strong',[_vm._v("Part 2:")])]),_vm._v(" "),_c('ul',[_c('li',[_vm._v("In the Azure portal, I select "),_c('strong',[_vm._v("Virtual Networks")]),_vm._v(", select the "),_c('strong',[_vm._v("spoke2-vnet")]),_vm._v(", then select "),_c('strong',[_vm._v("Peerings")]),_vm._v(".")])]),_vm._v(" "),_c('img',{attrs:{"src":_vm.$withBase('/files/peering6.png')}}),_vm._v(" "),_c('ul',[_c('li',[_vm._v("Click the "),_c('strong',[_vm._v("Add")]),_vm._v(" button.")])]),_vm._v(" "),_c('img',{attrs:{"src":_vm.$withBase('/files/peering7.png')}}),_vm._v(" "),_c('ul',[_c('li',[_vm._v("I give the peering the reverse name "),_c('strong',[_vm._v("spoke2-hub-peer")]),_vm._v(", select the "),_c('strong',[_vm._v("subscription")]),_vm._v(" and "),_c('strong',[_vm._v("virtual network")]),_vm._v(" of hub-vnet, and check the "),_c('strong',[_vm._v("Use remote gateway")]),_vm._v(". Then I click "),_c('strong',[_vm._v("OK")]),_vm._v(" to create the peering.")])]),_vm._v(" "),_c('img',{attrs:{"src":_vm.$withBase('/files/peering8.png')}}),_vm._v(" "),_c('p',[_vm._v("Note: "),_c('strong',[_vm._v("Use remote gateways")]),_vm._v(" is the reverse setting of the one that allows the usage of the gateway in hub-vnet.")]),_vm._v(" "),_c('ul',[_c('li',[_vm._v("Now I go back to my virtual networks list and repeat for "),_c('strong',[_vm._v("spoke1-vnet")]),_vm._v(".")])]),_vm._v(" "),_c('img',{attrs:{"src":_vm.$withBase('/files/peering9.png')}}),_vm._v(" "),_c('p',[_vm._v("I now have the VNET peerings shown below:")]),_vm._v(" "),_c('img',{attrs:{"src":_vm.$withBase('/files/peering10.png')}}),_vm._v(" "),_c('p',[_c('strong',[_vm._v("Part 3:")])]),_vm._v(" "),_c('p',[_vm._v("To test that I can connect to each of the VMs, I first need to download the VPN client again.")]),_vm._v(" "),_c('ul',[_c('li',[_vm._v("In the Azure portal, I search for "),_c('strong',[_vm._v("vnet-gw")]),_vm._v(" and select it from the results, and then select "),_c('strong',[_vm._v("Point-to-site configuration")]),_vm._v(".")])]),_vm._v(" "),_c('img',{attrs:{"src":_vm.$withBase('/files/peering11.png')}}),_vm._v(" "),_c('ul',[_c('li',[_vm._v("Then I click "),_c('strong',[_vm._v("Download VPN client")]),_vm._v(" and reinstall it once it downloads.")])]),_vm._v(" "),_c('img',{attrs:{"src":_vm.$withBase('/files/peering12.png')}}),_vm._v(" "),_c('p',[_vm._v("Once I have it reinstalled, I "),_c('strong',[_vm._v("connect the VPN")]),_vm._v(".")]),_vm._v(" "),_c('ul',[_c('li',[_vm._v("I open remote desktop (type "),_c('strong',[_vm._v("mstsc")]),_vm._v(" at the command prompt or make sure you read "),_c('RouterLink',{attrs:{"to":"/blog/tip9/"}},[_vm._v("Quickly Connect to Windows VMs with RDP")]),_vm._v(") and, one by one, I verify that I can connect to the private IPs for the VMs:\n"),_c('ul',[_c('li',[_vm._v("Win2016svr-east: 10.0.0.36")]),_vm._v(" "),_c('li',[_vm._v("Win10vm-east: 10.1.0.68")]),_vm._v(" "),_c('li',[_vm._v("Win10vm2-east: 10.2.0.68")])])],1)]),_vm._v(" "),_c('p',[_vm._v("Thatâ€™s all it takes to connect all three VNETs using VNET peering!")]),_vm._v(" "),_c('p',[_vm._v("Read the full detail of how to "),_c('a',{attrs:{"href":"https://docs.microsoft.com/azure/architecture/reference-architectures/hybrid-networking/hub-spoke?toc=%2fazure%2fvirtual-network%2ftoc.json?WT.mc_id=docs-azuredevtips-azureappsdev","target":"_blank","rel":"noopener noreferrer"}},[_vm._v("Implement a hub-spoke network topology in Azure"),_c('OutboundLink')],1),_vm._v(" on the Azure Architecture site or watch "),_c('a',{attrs:{"href":"https://channel9.msdn.com/Shows/Azure-Friday/Virtual-Network-vNet-Peering?term=vnet%20peering&lang-en=true?WT.mc_id=ch9-azuredevtips-azureappsdev","target":"_blank","rel":"noopener noreferrer"}},[_vm._v("Virtual Network (vNet) Peering"),_c('OutboundLink')],1),_vm._v(" on Azure Friday.")])])}
var staticRenderFns = []



/***/ })

}]);
//# sourceMappingURL=95.e432cf18.js.map