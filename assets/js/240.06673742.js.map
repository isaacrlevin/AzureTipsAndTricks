{"version":3,"sources":["webpack:///./blog/tip55.md","webpack:///./blog/tip55.md?e083","webpack:///./blog/tip55.md?f826"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAmF;AACnF;;;AAGA;AACuF;AACvF,gBAAgB,2GAAU;AAC1B;AACA,EAAE,+EAAM;AACR,EAAE,wFAAe;AACjB;AACA;AACA;AACA;;AAEA;;AAEe,gF;;;;;;;;;;;;ACjBf;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA,0BAA0B,aAAa,0BAA0B,wBAAwB,qCAAqC,OAAO,gCAAgC,YAAY,+BAA+B,UAAU,iCAAiC,yEAAyE,OAAO,6IAA6I,6FAA6F,OAAO,+CAA+C,UAAU,mCAAmC,kDAAkD,oLAAoL,OAAO,yBAAyB,sGAAsG,OAAO,yBAAyB,sIAAsI,OAAO,yBAAyB,uVAAuV,OAAO,6JAA6J,6FAA6F,OAAO,iDAAiD,UAAU,mCAAmC,oDAAoD,6HAA6H,OAAO,uHAAuH,4dAA4d,OAAO,eAAe,UAAU,mCAAmC,kBAAkB,yyBAAyyB,0CAA0C,YAAY,gBAAgB,yBAAyB,gGAAgG,2BAA2B,6EAA6E,mCAAmC,aAAa,0BAA0B,oCAAoC,0BAA0B,oCAAoC,0BAA0B,oCAAoC,0BAA0B,oCAAoC,0BAA0B,oCAAoC,0BAA0B,wpBAAwpB,OAAO,eAAe,UAAU,mCAAmC,kBAAkB,sWAAsW,0CAA0C,YAAY,gBAAgB,yBAAyB,+LAA+L,mCAAmC,aAAa,0BAA0B,oCAAoC,0BAA0B,oCAAoC,0BAA0B,oCAAoC,0BAA0B,oCAAoC,0BAA0B,oCAAoC,0BAA0B,oCAAoC,0BAA0B,oCAAoC,0BAA0B,+vBAA+vB,OAAO,eAAe,UAAU,mCAAmC,kBAAkB,4NAA4N,0CAA0C,YAAY,gBAAgB,yBAAyB,+aAA+a,2BAA2B,g9BAAg9B,qCAAqC,yRAAyR,mCAAmC,aAAa,0BAA0B,oCAAoC,0BAA0B,oCAAoC,0BAA0B,oCAAoC,0BAA0B,oCAAoC,0BAA0B,oCAAoC,0BAA0B,oCAAoC,0BAA0B,oCAAoC,0BAA0B,oCAAoC,0BAA0B,oCAAoC,0BAA0B,qCAAqC,0BAA0B,qCAAqC,0BAA0B,qCAAqC,0BAA0B,qCAAqC,0BAA0B,qCAAqC,0BAA0B,qCAAqC,0BAA0B,qCAAqC,0BAA0B,qCAAqC,0BAA0B,qCAAqC,0BAA0B,qCAAqC,0BAA0B,qCAAqC,0BAA0B,qCAAqC,0BAA0B,qCAAqC,0BAA0B,qCAAqC,0BAA0B,qCAAqC,0BAA0B,qCAAqC,0BAA0B,qCAAqC,0BAA0B,qCAAqC,0BAA0B,qCAAqC,0BAA0B,qCAAqC,0BAA0B,qCAAqC,0BAA0B,qCAAqC,0BAA0B,qCAAqC,0BAA0B,qCAAqC,0BAA0B,wLAAwL,OAAO,6BAA6B,UAAU,mCAAmC,gCAAgC,kGAAkG,OAAO,iFAAiF,yOAAyO,OAAO,+CAA+C,qbAAqb,OAAO,+CAA+C;AACxtY","file":"assets/js/240.06673742.js","sourcesContent":["import { render, staticRenderFns } from \"./tip55.md?vue&type=template&id=910af7a0&\"\nvar script = {}\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../node_modules/cache-loader/dist/cjs.js?{\\\"cacheDirectory\\\":\\\"node_modules/@vuepress/core/node_modules/.cache/vuepress\\\",\\\"cacheIdentifier\\\":\\\"671ceca3-vue-loader-template\\\"}!../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??ref--1-1!../node_modules/@vuepress/markdown-loader/index.js??ref--1-2!./tip55.md?vue&type=template&id=910af7a0&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ContentSlotsDistributor',{attrs:{\"slot-key\":_vm.$parent.slotKey}},[_c('div',{staticClass:\"custom-block tip\"},[_c('p',{staticClass:\"custom-block-title\"},[_vm._v(\"TIP\")]),_vm._v(\" \"),_c('p',[_vm._v(\"ðŸ’¡ Learn more : \"),_c('a',{attrs:{\"href\":\"https://docs.microsoft.com/azure/containers/?WT.mc_id=docs-azuredevtips-azureappsdev\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\"}},[_vm._v(\"Azure for Containers\"),_c('OutboundLink')],1),_vm._v(\".\")])]),_vm._v(\" \"),_c('h3',{attrs:{\"id\":\"use-net-core-webapi-and-docker-compose\"}},[_c('a',{staticClass:\"header-anchor\",attrs:{\"href\":\"#use-net-core-webapi-and-docker-compose\"}},[_vm._v(\"#\")]),_vm._v(\" Use .NET Core WebAPI and Docker Compose\")]),_vm._v(\" \"),_c('p',[_vm._v(\"How hard do you think it is to:\")]),_vm._v(\" \"),_c('ul',[_c('li',[_c('RouterLink',{attrs:{\"to\":\"/blog/tip54.html\"}},[_vm._v(\"Create and Publish a .NET Core WebAPI project\")])],1),_vm._v(\" \"),_c('li',[_c('RouterLink',{attrs:{\"to\":\"/blog/tip55.html\"}},[_vm._v(\"Add it to a Docker Container using Docker Compose and push it to a Docker Hub\")])],1),_vm._v(\" \"),_c('li',[_c('RouterLink',{attrs:{\"to\":\"/blog/tip56.html\"}},[_vm._v(\"Use it in Azure with Web App for Containers\")])],1)]),_vm._v(\" \"),_c('p',[_vm._v(\"In this mini-series, we'll build on each part starting with creating and publishing a .NET Core WebAPI project. Today, we'll use Docker Compose to create an image and push it to Docker Cloud and we'll wrap up by deploying it to Azure using \"),_c('a',{attrs:{\"href\":\"https://azure.microsoft.com/services/app-service/containers?WT.mc_id=azure-azuredevtips-azureappsdev\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\"}},[_vm._v(\"Web App for Containers\"),_c('OutboundLink')],1),_vm._v(\".\")]),_vm._v(\" \"),_c('h4',{attrs:{\"id\":\"use-net-core-webapi-and-docker-compose-2\"}},[_c('a',{staticClass:\"header-anchor\",attrs:{\"href\":\"#use-net-core-webapi-and-docker-compose-2\"}},[_vm._v(\"#\")]),_vm._v(\" Use .NET Core WebAPI and Docker Compose\")]),_vm._v(\" \"),_c('p',[_vm._v(\"Now that we have \"),_c('a',{attrs:{\"href\":\"https://microsoft.github.io/AzureTipsAndTricks/blog/tip54.html\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\"}},[_vm._v(\"created and published a .NET Core WebAPI project\"),_c('OutboundLink')],1),_vm._v(\", we'll resume by using Docker Compose to create an image.\")]),_vm._v(\" \"),_c('p',[_vm._v(\"Think of this as three steps:\")]),_vm._v(\" \"),_c('p',[_vm._v(\"1.) We need a Dockerfile for the entire to understand the image we are creating.\\n2.) We need a docker-compose.yml file to pass to the Docker Compose Command\\n3.) We need to run the Docker Compose command.\")]),_vm._v(\" \"),_c('h4',{attrs:{\"id\":\"step-1\"}},[_c('a',{staticClass:\"header-anchor\",attrs:{\"href\":\"#step-1\"}},[_vm._v(\"#\")]),_vm._v(\" Step 1\")]),_vm._v(\" \"),_c('p',[_vm._v(\"Let's begin by creating a Dockerfile.\")]),_vm._v(\" \"),_c('p',[_c('strong',[_vm._v(\"What is a DockerFile?\")]),_vm._v(\"  It is simply a text file containing the instructions needed to create a new container image. These instructions include identification of an existing image to be used as a base, commands to be run during the image creation process, and a command that will run when new instances of the container image are deployed. In other words, this file defines your appâ€™s environment so it can be reproduced anywhere.\")]),_vm._v(\" \"),_c('p',[_vm._v(\"Copy and paste the following and name it \"),_c('code',[_vm._v(\"Dockerfile\")]),_vm._v(\" without an extension and place it in the same folder as your source code.\")]),_vm._v(\" \"),_c('div',{staticClass:\"language- line-numbers-mode\"},[_c('pre',{pre:true,attrs:{\"class\":\"language-text\"}},[_c('code',[_vm._v(\"FROM microsoft/aspnetcore:2.0\\nARG source\\nWORKDIR /app\\nEXPOSE 80\\nCOPY ${source:-obj/Docker/publish} .\\nENTRYPOINT [\\\"dotnet\\\", \\\"mbcwebapi.dll\\\"]\\n\")])]),_vm._v(\" \"),_c('div',{staticClass:\"line-numbers-wrapper\"},[_c('span',{staticClass:\"line-number\"},[_vm._v(\"1\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"2\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"3\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"4\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"5\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"6\")]),_c('br')])]),_c('p',[_vm._v(\"Let's go over the main instructions:\")]),_vm._v(\" \"),_c('ul',[_c('li',[_vm._v(\"The FROM instruction sets the container image that will be used during the new image creation process. In this case, we're using the base aspnetcore image from Microsoft.\")]),_vm._v(\" \"),_c('li',[_vm._v(\"The EXPOSE instruction sets the port number.\")]),_vm._v(\" \"),_c('li',[_vm._v(\"The COPY instruction provides where it is going to pull the final release from\")]),_vm._v(\" \"),_c('li',[_vm._v(\"The ENTRYPOINT instruction provides the entry point into the application and in our case, we specify the release .dll.\")])]),_vm._v(\" \"),_c('h4',{attrs:{\"id\":\"step-2\"}},[_c('a',{staticClass:\"header-anchor\",attrs:{\"href\":\"#step-2\"}},[_vm._v(\"#\")]),_vm._v(\" Step 2\")]),_vm._v(\" \"),_c('p',[_vm._v(\"We need a docker-compose.yml file to pass to the Docker Compose Command\")]),_vm._v(\" \"),_c('p',[_c('strong',[_vm._v(\"What is docker-compose.yml?\")]),_vm._v(\"  This file defines the services that make up your app so they can be run together in an isolated environment.\")]),_vm._v(\" \"),_c('div',{staticClass:\"language- line-numbers-mode\"},[_c('pre',{pre:true,attrs:{\"class\":\"language-text\"}},[_c('code',[_vm._v(\"version: '3'\\n\\nservices:\\n  mbcwebapi:\\n    image: mbcrump/mbcwebapi\\n    build:\\n      context: ./mbcwebapi\\n      dockerfile: Dockerfile\\n\")])]),_vm._v(\" \"),_c('div',{staticClass:\"line-numbers-wrapper\"},[_c('span',{staticClass:\"line-number\"},[_vm._v(\"1\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"2\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"3\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"4\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"5\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"6\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"7\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"8\")]),_c('br')])]),_c('p',[_vm._v(\"Let's go over the main instructions:\")]),_vm._v(\" \"),_c('p',[_vm._v(\"When composing this Docker image, we will use the \"),_c('code',[_vm._v(\"mbcwebapi\")]),_vm._v(\" project and build an image called \"),_c('code',[_vm._v(\"mbcrump/mbcwebapi\")]),_vm._v(\". We'll set the context to look in the \"),_c('code',[_vm._v(\"./mbcwebapi\")]),_vm._v(\" folder and there it will find the \"),_c('code',[_vm._v(\"Dockerfile\")]),_vm._v(\".\")]),_vm._v(\" \"),_c('p',[_c('strong',[_vm._v(\"Note:\")]),_vm._v(\"  Please note that the image name \"),_c('code',[_vm._v(\"mbcrump/mbcwebapi\")]),_vm._v(\" was based my Docker username and then the app name. If you don't have a Docker account, then you probably want to create one now.\")]),_vm._v(\" \"),_c('h4',{attrs:{\"id\":\"step-3\"}},[_c('a',{staticClass:\"header-anchor\",attrs:{\"href\":\"#step-3\"}},[_vm._v(\"#\")]),_vm._v(\" Step 3\")]),_vm._v(\" \"),_c('p',[_vm._v(\"We need to simply run \"),_c('code',[_vm._v(\"docker-compose up\")]),_vm._v(\" and Docker Compose will start and run your entire app.\")]),_vm._v(\" \"),_c('div',{staticClass:\"language- line-numbers-mode\"},[_c('pre',{pre:true,attrs:{\"class\":\"language-text\"}},[_c('code',[_vm._v(\"Michaels-MacBook-Pro:mbcwebapi mbcrump$ docker-compose up\\nCreating network \\\"mbcwebapi_default\\\" with the default driver\\nBuilding mbcwebapi\\nStep 1/6 : FROM microsoft/aspnetcore:2.0\\n ---> 757f574feed9\\nStep 2/6 : ARG source\\n ---> Using cache\\n ---> 96deb3aec068\\nStep 3/6 : WORKDIR /app\\n ---> Using cache\\n ---> c0fecb757aa4\\nStep 4/6 : EXPOSE 80\\n ---> Using cache\\n ---> e4f034c54397\\nStep 5/6 : COPY ${source:-obj/Docker/publish} .\\n ---> 6bd68f6553c4\\nStep 6/6 : ENTRYPOINT dotnet mbcwebapi.dll\\n ---> Running in 7036d9913baa\\n ---> 90384b8ed543\\nRemoving intermediate container 7036d9913baa\\nSuccessfully built 90384b8ed543\\nSuccessfully tagged mbcrump/mbcwebapi:latest\\nWARNING: Image for service mbcwebapi was built because it did not already exist. To rebuild this image you must use `docker-compose build` or `docker-compose up --build`.\\nCreating mbcwebapi_mbcwebapi_1 ... \\nCreating mbcwebapi_mbcwebapi_1 ... done\\nAttaching to mbcwebapi_mbcwebapi_1\\nmbcwebapi_1  | warn: Microsoft.AspNetCore.DataProtection.Repositories.FileSystemXmlRepository[60]\\nmbcwebapi_1  |       Storing keys in a directory '/root/.aspnet/DataProtection-Keys' that may not be persisted outside of the container. Protected data will be unavailable when container is destroyed.\\nmbcwebapi_1  | warn: Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager[35]\\nmbcwebapi_1  |       No XML encryptor configured. Key {70d9c953-b38f-4e26-92d2-6a07557aaefc} may be persisted to storage in unencrypted form.\\nmbcwebapi_1  | Hosting environment: Production\\nmbcwebapi_1  | Content root path: /app\\nmbcwebapi_1  | Now listening on: http://[::]:80\\nmbcwebapi_1  | Application started. Press Ctrl+C to shut down.\\n\")])]),_vm._v(\" \"),_c('div',{staticClass:\"line-numbers-wrapper\"},[_c('span',{staticClass:\"line-number\"},[_vm._v(\"1\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"2\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"3\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"4\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"5\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"6\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"7\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"8\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"9\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"10\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"11\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"12\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"13\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"14\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"15\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"16\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"17\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"18\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"19\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"20\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"21\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"22\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"23\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"24\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"25\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"26\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"27\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"28\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"29\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"30\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"31\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"32\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"33\")]),_c('br'),_c('span',{staticClass:\"line-number\"},[_vm._v(\"34\")]),_c('br')])]),_c('p',[_vm._v(\"Excellent! We now have a ASP.NET WebAPI project living inside a Docker Container that we can push to Docker Hub.\")]),_vm._v(\" \"),_c('h4',{attrs:{\"id\":\"push-to-docker-cloud\"}},[_c('a',{staticClass:\"header-anchor\",attrs:{\"href\":\"#push-to-docker-cloud\"}},[_vm._v(\"#\")]),_vm._v(\" Push to Docker Cloud\")]),_vm._v(\" \"),_c('p',[_vm._v(\"Login to \"),_c('a',{attrs:{\"href\":\"https://cloud.docker.com\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\"}},[_vm._v(\"Docker Cloud\"),_c('OutboundLink')],1),_vm._v(\" and create a repository. In my case, I used \"),_c('code',[_vm._v(\"mbcrump/mbcwebapi\")]),_vm._v(\" just like in the docker-compose.yml example earlier.\")]),_vm._v(\" \"),_c('img',{attrs:{\"src\":_vm.$withBase('/files/dockerblog1.png')}}),_vm._v(\" \"),_c('p',[_vm._v(\"Head back to the terminal or command prompt and enter:\")]),_vm._v(\" \"),_c('p',[_c('code',[_vm._v(\"docker login\")]),_vm._v(\" to authenticate your account.\")]),_vm._v(\" \"),_c('p',[_c('code',[_vm._v(\"docker push mbcrump/mbcwebapi:latest\")]),_vm._v(\" to push your image to Docker Cloud.\")]),_vm._v(\" \"),_c('p',[_vm._v(\"You can go back to Docker Cloud to verify it pushed successfully.\")]),_vm._v(\" \"),_c('img',{attrs:{\"src\":_vm.$withBase('/files/dockerblog2.png')}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }"],"sourceRoot":""}