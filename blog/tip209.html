<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Tip 209 - Prebuilt Terraform Image for Infrastructure Automation | Azure Tips and Tricks</title>
    <meta name="generator" content="VuePress 1.6.0">
    <link rel="apple-touch-icon" sizes="57x57" href="/AzureTipsAndTricks/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/AzureTipsAndTricks/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/AzureTipsAndTricks/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/AzureTipsAndTricks/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/AzureTipsAndTricks/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/AzureTipsAndTricks/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/AzureTipsAndTricks/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/AzureTipsAndTricks/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/AzureTipsAndTricks/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192" href="/AzureTipsAndTricks/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/AzureTipsAndTricks/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/AzureTipsAndTricks/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/AzureTipsAndTricks/favicon-16x16.png">
    <link rel="manifest" href="/AzureTipsAndTricks/manifest.json">
    <script async="true" src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
    <meta name="description" content="">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <link rel="preload" href="/AzureTipsAndTricks/assets/css/0.styles.c8332aeb.css" as="style"><link rel="preload" href="/AzureTipsAndTricks/assets/js/app.22bc91e5.js" as="script"><link rel="preload" href="/AzureTipsAndTricks/assets/js/2.51dc849b.js" as="script"><link rel="preload" href="/AzureTipsAndTricks/assets/js/3.b0867e48.js" as="script"><link rel="preload" href="/AzureTipsAndTricks/assets/js/127.d2811448.js" as="script"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/10.a040b7dc.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/100.c3b49f2a.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/101.8fb172d1.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/102.eaec7e86.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/103.ef4a5189.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/104.144021ab.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/105.3dfb7079.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/106.0d3873bd.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/107.31e64c65.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/108.460254f5.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/109.83d4e32d.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/11.5ff9aae7.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/110.01f0e26c.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/111.d625f9b6.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/112.5ad29ca5.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/113.e218bb49.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/114.2bbf956e.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/115.a1449bda.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/116.f93639eb.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/117.b3138553.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/118.3f8c39d8.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/119.1202b863.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/12.f115136b.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/120.17fa7b26.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/121.75f1637b.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/122.994bc975.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/123.b3758edd.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/124.e4e6958e.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/125.58848d95.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/126.1b6240ff.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/128.1d49d42f.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/129.e475bb64.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/13.8eca3271.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/130.ab349576.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/131.08e207a8.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/132.c2254f49.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/133.af9820e7.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/134.2388ce94.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/135.b5974309.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/136.4b802dd8.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/137.6a9a0777.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/138.047d1f2d.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/139.abc25059.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/14.02479206.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/140.2eb35039.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/141.db6aeb74.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/142.280c0fb1.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/143.c2bf0efa.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/144.5cc78c0a.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/145.2e94431d.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/146.1ca1b2d8.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/147.42b5aae8.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/148.c08969a4.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/149.ffaebf6f.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/15.c95c4190.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/150.852eaac9.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/151.81cad344.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/152.6af94448.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/153.21eb7dc4.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/154.c3eae103.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/155.554695d0.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/156.a8828384.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/157.3e5e719c.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/158.b47fb5f8.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/159.9022486d.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/16.d068ab34.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/160.24689fbb.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/161.25021caf.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/162.54cb3690.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/163.afcb51ee.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/164.56612cdd.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/165.76cd362f.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/166.757e3ce3.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/167.be53e49a.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/168.5ebcc520.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/169.fcefc244.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/17.db521562.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/170.69ea4b21.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/171.ad907496.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/172.6f9d0afc.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/173.acf405cc.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/174.934ee6a1.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/175.ef68bf54.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/176.8af80011.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/177.d2d68bf1.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/178.d75f27fd.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/179.4efecb6d.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/18.764ee2ee.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/180.7ec3d8f8.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/181.020e1b0e.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/182.4f842c08.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/183.dc9db6c5.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/184.11021f34.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/185.10ae75b6.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/186.52068b83.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/187.43f5ca18.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/188.cabafd9b.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/189.237e66ad.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/19.555adaa1.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/190.a64ce45d.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/191.08f2d372.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/192.3dee476d.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/193.d17352c0.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/194.7395729a.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/195.dddc542f.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/196.24a79585.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/197.b6913f4e.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/198.48d18b5a.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/199.2f81c3ca.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/20.5146729d.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/200.d1619ced.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/201.b9fac706.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/202.abf96145.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/203.02049978.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/204.2a2238c6.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/205.4b71c357.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/206.10d40715.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/207.2a25cacc.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/208.d3d443d0.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/209.250f1e37.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/21.3b316619.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/210.b86fab0d.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/211.fd0cd202.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/212.be04751c.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/213.e572c312.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/214.81b863d1.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/215.520c46f4.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/216.56b710b5.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/217.bf4a272a.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/218.4d0d5c0c.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/219.81ef9a28.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/22.71f2bb7b.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/220.9296108c.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/221.4b8c5fe4.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/222.5006bfad.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/223.a1b3753b.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/224.44a19323.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/225.88aadd7e.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/226.e90b3146.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/227.5f48e642.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/228.cb0f9859.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/229.95694bfc.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/23.cc0b15fd.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/230.9679e4ed.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/231.ea5159f2.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/232.b9321a82.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/233.8038e274.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/234.ed711385.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/235.ee38f5d0.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/236.294dd64a.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/237.4341c794.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/238.85c16f6c.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/239.d81750cf.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/24.921ae426.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/240.40003d6d.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/241.e51799af.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/242.0a1a036b.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/243.8004b6fb.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/244.67edc3cb.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/245.015e5a71.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/246.d5464c2e.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/247.2c7c7b93.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/248.41067fdf.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/249.e89955c0.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/25.873850b3.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/250.2b74f87d.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/251.e08808de.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/252.8cde17af.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/253.bdcf6791.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/254.db50e9e3.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/255.9900b721.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/256.c53d79be.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/257.fee0ae65.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/258.21abeb53.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/259.4ab29263.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/26.2ce10f57.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/260.ba78eff0.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/261.64d0df5b.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/262.edd0d742.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/263.ed36ce0e.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/264.c6680408.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/265.b903efa6.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/266.be17cc03.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/267.c6838a6a.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/268.0c25d5e4.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/269.f223b41b.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/27.2534bad8.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/270.e176d07b.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/271.a9f50789.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/272.e4ee4194.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/273.7e3a356a.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/274.1b3d0475.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/275.7bf9585e.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/276.f07e6f78.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/277.680bc5ce.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/278.286504a4.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/279.84e1c75c.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/28.e5a4ffdc.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/280.a7dda14b.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/281.2b74cbf0.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/282.ada62862.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/283.3a34f6bc.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/284.8a741d05.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/285.7ffe4c24.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/286.fd313f00.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/287.3208ea9d.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/288.27fc6fcd.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/289.1ed7cc03.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/29.c3bc3316.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/290.46e8a773.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/291.fa37a0c9.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/30.73e701de.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/31.66918acc.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/32.9f6f637f.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/33.e9d9b20d.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/34.414fadd7.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/35.6788de8c.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/36.f016eabb.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/37.bdcbcca1.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/38.13968097.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/39.f885ef60.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/4.21c78e69.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/40.c0f6bfdd.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/41.4b083cc7.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/42.6697282c.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/43.7711261b.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/44.3cc27a47.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/45.1f6619af.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/46.fe7fdb07.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/47.80e3bbb8.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/48.330a2858.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/49.58d187c8.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/5.aa1cd41d.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/50.6c4c58ee.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/51.9bca6972.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/52.70ebc200.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/53.ab8592f8.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/54.2e827cf5.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/55.8eaea28f.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/56.bcc97aad.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/57.aa19fe69.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/58.7e71caee.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/59.ae733e08.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/6.038cb522.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/60.7fadf13d.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/61.7403eae2.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/62.0e8bb0e6.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/63.657ce6b1.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/64.145a4797.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/65.a7effd29.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/66.45b981a0.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/67.2f1f333f.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/68.0abf441c.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/69.5f93cfa0.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/7.4cb7e433.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/70.47c3ab8a.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/71.824affc1.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/72.0cfd9ce0.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/73.a201c29d.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/74.4a183dc6.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/75.33da7318.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/76.9f62b9c4.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/77.0d05a3f1.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/78.10aabe3e.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/79.8e862ab3.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/8.71cf5551.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/80.0cb684ec.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/81.d0b51aea.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/82.2c95f9fc.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/83.9785913d.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/84.3b9ed251.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/85.05fa12e1.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/86.91d06fbc.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/87.0fc12282.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/88.4b1857e4.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/89.f6a0c42e.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/9.92fd7bd1.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/90.c98e067c.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/91.b6a1c60e.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/92.26b9eeb7.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/93.7be52d47.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/94.bb1c105f.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/95.c80c154a.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/96.412cc995.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/97.84e3cdc8.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/98.dc909ebe.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/99.c823f413.js">
    <link rel="stylesheet" href="/AzureTipsAndTricks/assets/css/0.styles.c8332aeb.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/AzureTipsAndTricks/" class="home-link router-link-active"><img src="/AzureTipsAndTricks/files/vintage.png" alt="Azure Tips and Tricks" class="logo"> <span class="site-name can-hide">Azure Tips and Tricks</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/AzureTipsAndTricks/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="http://videos.azuredev.tips" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Videos
  <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/Microsoft/AzureTipsAndTricks/issues/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Questions?
  <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://microsoft.github.io/AzureTipsAndTricks/rss.xml" target="_blank" rel="noopener noreferrer" class="nav-link external">
  RSS Feed
  <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/microsoft/azuretipsandtricks" target="_blank" rel="noopener noreferrer" class="repo-link">
    Star this Repo
    <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/AzureTipsAndTricks/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="http://videos.azuredev.tips" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Videos
  <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/Microsoft/AzureTipsAndTricks/issues/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Questions?
  <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://microsoft.github.io/AzureTipsAndTricks/rss.xml" target="_blank" rel="noopener noreferrer" class="nav-link external">
  RSS Feed
  <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/microsoft/azuretipsandtricks" target="_blank" rel="noopener noreferrer" class="repo-link">
    Star this Repo
    <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Home</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/AzureTipsAndTricks/" aria-current="page" class="sidebar-link">Welcome</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Tips</span> <!----></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>.NET</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>👊 that ⭐️ button on the official <a href="https://github.com/Microsoft/AzureTipsAndTricks/" target="_blank" rel="noopener noreferrer">GitHub repo<svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> to stay up to date.</p> <p>💡 Learn more : <a href="https://docs.microsoft.com/en-us/azure/terraform/terraform-vm-msi?WT.mc_id=docs-azuredevtips-azureappsdev" target="_blank" rel="noopener noreferrer">Terraform Image from Azure Marketplace<svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div> <p>This post was brought to you by <strong><a href="https://twitter.com/kumarallamraju" target="_blank" rel="noopener noreferrer">Kumar Allamraju<svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></strong>.</p> <h3 id="prebuilt-terraform-image-to-automate-infrastructure-deployment"><a href="#prebuilt-terraform-image-to-automate-infrastructure-deployment" class="header-anchor">#</a> Prebuilt Terraform Image to automate Infrastructure Deployment</h3> <p>Microsoft continues to expand support for  Infrastructure Automation with the launch of a fully configured version of <a href="https://www.terraform.io?WT.mc_id=docs-azuredevtips-azureappsdev" target="_blank" rel="noopener noreferrer">Terraform<svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> in Azure Marketplace. This enables easier adoption for users looking to use Terraform as their primary provisioning tool.</p> <p>The list includes</p> <ul><li>Terraform (latest)</li> <li>Azure CLI 2.0</li> <li>Managed Service Identity (MSI) VM Extension</li></ul> <p>In few simple steps, we will learn to provision an Ubuntu VM and allows us to automate the infrastructure deployment  using Terraform.</p> <h4 id="_1-in-the-azure-portal-go-to-create-a-resource-and-search-for-terraform-in-the-search-box"><a href="#_1-in-the-azure-portal-go-to-create-a-resource-and-search-for-terraform-in-the-search-box" class="header-anchor">#</a> 1. In the Azure portal, go to + Create a resource and search for &quot;terraform&quot; in the search box.</h4> <img src="/AzureTipsAndTricks/files/tf-step1.jpg"> <h4 id="_2-select-terraform-and-create"><a href="#_2-select-terraform-and-create" class="header-anchor">#</a> 2. Select Terraform and Create</h4> <img src="/AzureTipsAndTricks/files/tf-step2.jpg"> <h4 id="_3-complete-the-provisioning-wizard-and-buy-the-virtual-machine-from-azure-marketplace"><a href="#_3-complete-the-provisioning-wizard-and-buy-the-virtual-machine-from-azure-marketplace" class="header-anchor">#</a> 3. Complete the provisioning wizard and Buy the virtual machine from Azure marketplace.</h4> <img src="/AzureTipsAndTricks/files/tf-step3.jpg"> <h4 id="_4-the-terraform-vm-image"><a href="#_4-the-terraform-vm-image" class="header-anchor">#</a> 4. The Terraform VM image:</h4> <ul><li>Creates a VM with system-assigned identity that's based on the Ubuntu 16.04 LTS image.</li> <li>Installs the MSI extension on the VM to allow OAuth tokens to be issued for Azure resources.</li> <li>Assigns RBAC permissions to the managed identity, granting owner rights for the resource group.</li> <li>Creates a Terraform template folder (tfTemplate).
Pre-configures a Terraform remote state with the Azure back end.</li></ul> <h4 id="_5-ssh-to-the-vm-and-run-the-below-script-in-your-home-directory-tfenv-sh"><a href="#_5-ssh-to-the-vm-and-run-the-below-script-in-your-home-directory-tfenv-sh" class="header-anchor">#</a> 5. SSH to the VM and run the below script in your home directory<code>~ . ~/tfEnv.sh</code></h4> <p>This script uses az CLI to authenticate with Azure and assign the virtual machine Managed Identity contributor permission on your subscription. You can verify this by going in to the VM's Identity page under Settings</p> <img src="/AzureTipsAndTricks/files/tf-step4.jpg"> <h4 id="_6-create-a-file-named-azurevm-tf-and-copy-the-following-code"><a href="#_6-create-a-file-named-azurevm-tf-and-copy-the-following-code" class="header-anchor">#</a> 6. Create a file named <code>azurevm.tf</code> and copy the following code.</h4> <p>Note: SSH key data is provided in the ssh_keys section. Provide a valid public SSH key in the key_data field.</p> <div class="language- line-numbers-mode"><pre class="language-text"><code># Create a resource group if it doesn’t exist
resource &quot;azurerm_resource_group&quot; &quot;myterraformgroup&quot; {
    name     = &quot;myResourceGroup&quot;
    location = &quot;eastus&quot;

    tags = {
        environment = &quot;Terraform Demo&quot;
    }
}

# Create virtual network
resource &quot;azurerm_virtual_network&quot; &quot;myterraformnetwork&quot; {
    name                = &quot;myVnet&quot;
    address_space       = [&quot;10.0.0.0/16&quot;]
    location            = &quot;eastus&quot;
    resource_group_name = &quot;${azurerm_resource_group.myterraformgroup.name}&quot;

    tags = {
        environment = &quot;Terraform Demo&quot;
    }
}

# Create subnet
resource &quot;azurerm_subnet&quot; &quot;myterraformsubnet&quot; {
    name                 = &quot;mySubnet&quot;
    resource_group_name  = &quot;${azurerm_resource_group.myterraformgroup.name}&quot;
    virtual_network_name = &quot;${azurerm_virtual_network.myterraformnetwork.name}&quot;
    address_prefix       = &quot;10.0.1.0/24&quot;
}

# Create public IPs
resource &quot;azurerm_public_ip&quot; &quot;myterraformpublicip&quot; {
    name                         = &quot;myPublicIP&quot;
    location                     = &quot;eastus&quot;
    resource_group_name          = &quot;${azurerm_resource_group.myterraformgroup.name}&quot;
    allocation_method            = &quot;Dynamic&quot;

    tags = {
        environment = &quot;Terraform Demo&quot;
    }
}

# Create Network Security Group and rule
resource &quot;azurerm_network_security_group&quot; &quot;myterraformnsg&quot; {
    name                = &quot;myNetworkSecurityGroup&quot;
    location            = &quot;eastus&quot;
    resource_group_name = &quot;${azurerm_resource_group.myterraformgroup.name}&quot;
    
    security_rule {
        name                       = &quot;SSH&quot;
        priority                   = 1001
        direction                  = &quot;Inbound&quot;
        access                     = &quot;Allow&quot;
        protocol                   = &quot;Tcp&quot;
        source_port_range          = &quot;*&quot;
        destination_port_range     = &quot;22&quot;
        source_address_prefix      = &quot;*&quot;
        destination_address_prefix = &quot;*&quot;
    }

    tags = {
        environment = &quot;Terraform Demo&quot;
    }
}

# Create network interface
resource &quot;azurerm_network_interface&quot; &quot;myterraformnic&quot; {
    name                      = &quot;myNIC&quot;
    location                  = &quot;eastus&quot;
    resource_group_name       = &quot;${azurerm_resource_group.myterraformgroup.name}&quot;
    network_security_group_id = &quot;${azurerm_network_security_group.myterraformnsg.id}&quot;

    ip_configuration {
        name                          = &quot;myNicConfiguration&quot;
        subnet_id                     = &quot;${azurerm_subnet.myterraformsubnet.id}&quot;
        private_ip_address_allocation = &quot;Dynamic&quot;
        public_ip_address_id          = &quot;${azurerm_public_ip.myterraformpublicip.id}&quot;
    }

    tags = {
        environment = &quot;Terraform Demo&quot;
    }
}

# Generate random text for a unique storage account name
resource &quot;random_id&quot; &quot;randomId&quot; {
    keepers = {
        # Generate a new ID only when a new resource group is defined
        resource_group = &quot;${azurerm_resource_group.myterraformgroup.name}&quot;
    }
    
    byte_length = 8
}

# Create storage account for boot diagnostics
resource &quot;azurerm_storage_account&quot; &quot;mystorageaccount&quot; {
    name                        = &quot;diag${random_id.randomId.hex}&quot;
    resource_group_name         = &quot;${azurerm_resource_group.myterraformgroup.name}&quot;
    location                    = &quot;eastus&quot;
    account_tier                = &quot;Standard&quot;
    account_replication_type    = &quot;LRS&quot;

    tags = {
        environment = &quot;Terraform Demo&quot;
    }
}

# Create virtual machine
resource &quot;azurerm_virtual_machine&quot; &quot;myterraformvm&quot; {
    name                  = &quot;myVM&quot;
    location              = &quot;eastus&quot;
    resource_group_name   = &quot;${azurerm_resource_group.myterraformgroup.name}&quot;
    network_interface_ids = [&quot;${azurerm_network_interface.myterraformnic.id}&quot;]
    vm_size               = &quot;Standard_DS1_v2&quot;

    storage_os_disk {
        name              = &quot;myOsDisk&quot;
        caching           = &quot;ReadWrite&quot;
        create_option     = &quot;FromImage&quot;
        managed_disk_type = &quot;Premium_LRS&quot;
    }

    storage_image_reference {
        publisher = &quot;Canonical&quot;
        offer     = &quot;UbuntuServer&quot;
        sku       = &quot;16.04.0-LTS&quot;
        version   = &quot;latest&quot;
    }

    os_profile {
        computer_name  = &quot;myvm&quot;
        admin_username = &quot;azureuser&quot;
    }

    os_profile_linux_config {
        disable_password_authentication = true
        ssh_keys {
            path     = &quot;/home/azureuser/.ssh/authorized_keys&quot;
            key_data = &quot;ssh-rsa AAAAB3Nz{snip}hwhqT9h&quot;
        }
    }

    boot_diagnostics {
        enabled = &quot;true&quot;
        storage_uri = &quot;${azurerm_storage_account.mystorageaccount.primary_blob_endpoint}&quot;
    }

    tags = {
        environment = &quot;Terraform Demo&quot;
    }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br></div></div><h4 id="build-and-deploy-the-infrastructure"><a href="#build-and-deploy-the-infrastructure" class="header-anchor">#</a> Build and deploy the infrastructure</h4> <p>With your Terraform template created, the first step is to initialize Terraform. This step ensures that Terraform has all the prerequisites to build your template in Azure.</p> <p><code>terraform init</code></p> <p>The next step is to have Terraform review and validate the template. This step compares the requested resources to the state information saved by Terraform and then outputs the planned execution. Resources are not created in Azure.</p> <p><code>terraform plan</code></p> <p>After you execute the previous command, you should see something like  below:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>Refreshing Terraform state in-memory prior to plan...
The refreshed state will be used to calculate this plan, but will not be
persisted to local or remote state storage.
...

Note: You didn’t specify an “-out” parameter to save this plan, so when
“apply” is called, Terraform can’t guarantee this is what will execute.
  + azurerm_resource_group.myterraform
      &lt;snip&gt;
  + azurerm_virtual_network.myterraformnetwork
      &lt;snip&gt;
  + azurerm_network_interface.myterraformnic
      &lt;snip&gt;
  + azurerm_network_security_group.myterraformnsg
      &lt;snip&gt;
  + azurerm_public_ip.myterraformpublicip
      &lt;snip&gt;
  + azurerm_subnet.myterraformsubnet
      &lt;snip&gt;
  + azurerm_virtual_machine.myterraformvm
      &lt;snip&gt;
Plan: 7 to add, 0 to change, 0 to destroy.
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h4 id="_7-if-everything-looks-correct-and-you-are-ready-to-build-the-infrastructure-in-azure-apply-the-template-in-terraform"><a href="#_7-if-everything-looks-correct-and-you-are-ready-to-build-the-infrastructure-in-azure-apply-the-template-in-terraform" class="header-anchor">#</a> 7. If everything looks correct and you are ready to build the infrastructure in Azure, apply the template in Terraform:</h4> <p><code>terraform apply</code></p> <h4 id="_8-once-you-are-done-you-can-destroy-the-resources-by-executing"><a href="#_8-once-you-are-done-you-can-destroy-the-resources-by-executing" class="header-anchor">#</a> 8. Once you are done, you can destroy the resources by executing</h4> <p><code>terraform destroy</code></p> <h4 id="_9-you-are-free-to-stop-the-vm-if-you-wish-to-save-money-on-compute-costs"><a href="#_9-you-are-free-to-stop-the-vm-if-you-wish-to-save-money-on-compute-costs" class="header-anchor">#</a> 9. You are free to stop the VM if you wish to save money on Compute costs.</h4> <h4 id="conclusion"><a href="#conclusion" class="header-anchor">#</a> Conclusion</h4> <p>The Terraform Marketplace image makes it easy for users to get started using Terraform on Azure, without having to install and configure Terraform manually. There are no software charges for this Terraform VM image. You pay only the Azure Compute usage fees that are assessed based on the size of the virtual machine that's provisioned.  We encourage you to give it a try and share your experience with us.</p> <ul><li><p><a href="https://github.com/terraform-providers/terraform-provider-azurerm?WT.mc_id=github-azuredevtips-azureappsdev" target="_blank" rel="noopener noreferrer">Terraform Azure examples<svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></li> <li><p><a href="https://docs.microsoft.com/en-us/azure/terraform?WT.mc_id=github-azuredevtips-azureappsdev" target="_blank" rel="noopener noreferrer">Terraform on Azure documentation<svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></li> <li><p><a href="https://www.terraform.io/docs/providers/azurerm/index.html?WT.mc_id=github-azuredevtips-azureappsdev" target="_blank" rel="noopener noreferrer">Terraform Azure Provider<svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/microsoft/azuretipsandtricks/edit/main/blog/tip209.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/AzureTipsAndTricks/assets/js/app.22bc91e5.js" defer></script><script src="/AzureTipsAndTricks/assets/js/2.51dc849b.js" defer></script><script src="/AzureTipsAndTricks/assets/js/3.b0867e48.js" defer></script><script src="/AzureTipsAndTricks/assets/js/127.d2811448.js" defer></script>
  </body>
</html>
